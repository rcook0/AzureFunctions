<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.3.7.2 (Linux)"/>
	<meta name="created" content="2025-09-19T09:17:32.275891713"/>
	<meta name="changed" content="2025-09-19T09:18:18.604195258"/>
	<style type="text/css">
		@page { size: 21cm 29.7cm; margin: 2cm }
		p { line-height: 115%; margin-bottom: 0.25cm; background: transparent }
		h2 { margin-top: 0.35cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Liberation Serif", serif; font-size: 18pt; font-weight: bold }
		h2.cjk { font-family: "Noto Serif CJK SC"; font-size: 18pt; font-weight: bold }
		h2.ctl { font-family: "Lohit Devanagari"; font-size: 18pt; font-weight: bold }
		pre { background: transparent }
		pre.western { font-family: "Liberation Mono", monospace; font-size: 10pt }
		pre.cjk { font-family: "Noto Sans Mono CJK SC", monospace; font-size: 10pt }
		pre.ctl { font-family: "Liberation Mono", monospace; font-size: 10pt }
		code.western { font-family: "Liberation Mono", monospace }
		code.cjk { font-family: "Noto Sans Mono CJK SC", monospace }
		code.ctl { font-family: "Liberation Mono", monospace }
		strong { font-weight: bold }
	</style>
</head>
<body lang="da-DK" link="#000080" vlink="#800000" dir="ltr"><h2 class="western">
1. Login and Set Subscription</h2>
<pre class="western"><code class="western">az login</code>
<code class="western">az account set --subscription &quot;&lt;your-subscription-id&gt;&quot;</code></pre>
<hr/>

<h2 class="western">2. Create a Resource Group</h2>
<pre class="western"><code class="western">az group create \</code>
<code class="western">  </code><code class="western">--name FuncDemoRG \</code>
<code class="western">  </code><code class="western">--location westeurope</code></pre>
<hr/>

<h2 class="western">3. Create Storage Account</h2>
<p>Functions require a backing storage account.</p>
<pre class="western"><code class="western">az storage account create \</code>
<code class="western">  </code><code class="western">--name funcdemostorage$RANDOM \</code>
<code class="western">  </code><code class="western">--location westeurope \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--sku Standard_LRS</code></pre><p>
Take note of the storage account name.</p>
<hr/>

<h2 class="western">4. Create a Cosmos DB (SQL API)</h2>
<pre class="western"><code class="western">az cosmosdb create \</code>
<code class="western">  </code><code class="western">--name funcdemocosmos$RANDOM \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--kind GlobalDocumentDB</code></pre><p>
Get a key + endpoint:</p>
<pre class="western"><code class="western">az cosmosdb keys list \</code>
<code class="western">  </code><code class="western">--name &lt;cosmos-name&gt; \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--type keys</code>

<code class="western">az cosmosdb show \</code>
<code class="western">  </code><code class="western">--name &lt;cosmos-name&gt; \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--query documentEndpoint</code></pre>
<hr/>

<h2 class="western">5. Create Function App</h2>
<p>Pick Node runtime (adjust if Python/C#):</p>
<pre class="western"><code class="western">az functionapp create \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--consumption-plan-location westeurope \</code>
<code class="western">  </code><code class="western">--runtime node \</code>
<code class="western">  </code><code class="western">--functions-version 4 \</code>
<code class="western">  </code><code class="western">--name func-demo-$RANDOM \</code>
<code class="western">  </code><code class="western">--storage-account &lt;storage-name&gt;</code></pre>
<hr/>

<h2 class="western">6. Configure Settings</h2>
<p>Inject the Cosmos connection string:</p>
<pre class="western"><code class="western">az functionapp config appsettings set \</code>
<code class="western">  </code><code class="western">--name &lt;function-app-name&gt; \</code>
<code class="western">  </code><code class="western">--resource-group FuncDemoRG \</code>
<code class="western">  </code><code class="western">--settings &quot;CosmosDBConnection=AccountEndpoint=&lt;endpoint&gt;;AccountKey=&lt;key&gt;;&quot;</code></pre>
<hr/>

<h2 class="western">7. Deploy Code</h2>
<p>From inside your project folder:</p>
<pre class="western" style="margin-bottom: 0.5cm"><code class="western">func azure functionapp publish &lt;function-app-name&gt;</code></pre><p>
This will bundle all functions (<code class="western">HttpStarter</code>,
<code class="western">QueueWorker</code>, <code class="western">BlobProcessor</code>,
<code class="western">CosmosWatcher</code>) and push them into Azure.</p>
<hr/>

<h2 class="western">8. Test Live</h2>
<p>Check your deployed endpoint:</p>
<pre class="western"><code class="western">curl -X POST https://&lt;function-app-name&gt;.azurewebsites.net/api/HttpStarter \</code>
<code class="western">  </code><code class="western">-H &quot;Content-Type: application/json&quot; \</code>
<code class="western">  </code><code class="western">-d '{&quot;task&quot;:&quot;production-test&quot;,&quot;priority&quot;:&quot;urgent&quot;}'</code></pre><p>
Then watch in the <strong>Azure Portal</strong>:</p>
<ul>
	<li><p>Storage → Blob containers → see <code class="western">processed/…json</code>.</p>
	<li><p>Cosmos DB → <code class="western">MyDB/Items</code>
	container → see docs appear.</p>
	<li><p>Function App → Monitor → logs show CosmosWatcher firing.</p>
</ul>
<hr/>

<h2 class="western">9. Clean Up (optional)</h2>
<p>When done testing:</p>
<pre class="western" style="margin-bottom: 0.5cm"><code class="western">az group delete --name FuncDemoRG --yes --no-wait</code></pre><p style="line-height: 100%; margin-bottom: 0cm">
<br/>

</p>
</body>
</html>